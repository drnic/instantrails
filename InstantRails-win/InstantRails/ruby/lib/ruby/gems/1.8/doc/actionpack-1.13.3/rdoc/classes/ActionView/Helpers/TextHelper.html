<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: ActionView::Helpers::TextHelper</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">ActionView::Helpers::TextHelper</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/action_view/helpers/text_helper_rb.html">
                lib/action_view/helpers/text_helper.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
The <a href="TextHelper.html">TextHelper</a> Module provides a set of
methods for filtering, formatting and transforming strings that can reduce
the amount of inline Ruby code in your views. These helper methods extend
ActionView making them callable within your template files as shown in the
following example which truncates the title of each post to 10 characters.
</p>
<pre>
  &lt;% @posts.each do |post| %&gt;
    # post == 'This is my title'
    Title: &lt;%= truncate(post.title, 10) %&gt;
  &lt;% end %&gt;
   =&gt; Title: This is my...
</pre>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M001185">auto_link</a>&nbsp;&nbsp;
      <a href="#M001175">concat</a>&nbsp;&nbsp;
      <a href="#M001189">cycle</a>&nbsp;&nbsp;
      <a href="#M001178">excerpt</a>&nbsp;&nbsp;
      <a href="#M001177">highlight</a>&nbsp;&nbsp;
      <a href="#M001183">markdown</a>&nbsp;&nbsp;
      <a href="#M001179">pluralize</a>&nbsp;&nbsp;
      <a href="#M001190">reset_cycle</a>&nbsp;&nbsp;
      <a href="#M001187">sanitize</a>&nbsp;&nbsp;
      <a href="#M001184">simple_format</a>&nbsp;&nbsp;
      <a href="#M001186">strip_links</a>&nbsp;&nbsp;
      <a href="#M001188">strip_tags</a>&nbsp;&nbsp;
      <a href="#M001181">textilize</a>&nbsp;&nbsp;
      <a href="#M001182">textilize_without_paragraph</a>&nbsp;&nbsp;
      <a href="#M001176">truncate</a>&nbsp;&nbsp;
      <a href="#M001180">word_wrap</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">VERBOTEN_TAGS</td>
          <td>=</td>
          <td class="context-item-value">%w(form script plaintext) unless defined?(VERBOTEN_TAGS)</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">VERBOTEN_ATTRS</td>
          <td>=</td>
          <td class="context-item-value">/^on/i unless defined?(VERBOTEN_ATTRS)</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">AUTO_LINK_RE</td>
          <td>=</td>
          <td class="context-item-value">%r{                         (                          # leading text                           &lt;\w+.*?&gt;|                # leading HTML tag, or                           [^=!:'&quot;/]|               # leading punctuation, or                            ^                        # beginning of line                         )                         (                           (?:https?://)|           # protocol spec, or                           (?:www\.)                # www.*                         )                          (                           [-\w]+                   # subdomain or domain                           (?:\.[-\w]+)*            # remaining subdomains or domain                           (?::\d+)?                # port                           (?:/(?:(?:[~\w\+%-]|(?:[,.;:][^\s$]))+)?)* # path                           (?:\?[\w\+%&amp;=.;-]+)?     # query string                           (?:\#[\w\-]*)?           # trailing anchor                         )                         ([[:punct:]]|\s|&lt;|$)       # trailing text                        }x unless const_defined?(:AUTO_LINK_RE)</td>
        </tr>
        </table>
      </div>
    </div>



      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M001185" class="method-detail">
        <a name="M001185"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001185.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001185.html');return false;">
          <span class="method-name">auto_link</span><span class="method-args">(text, link = :all, href_options = {}, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Turns all urls and email addresses into clickable links. The <tt>link</tt>
parameter will limit what should be linked. You can add html attributes to
the links using <tt>href_options</tt>. Options for <tt>link</tt> are
<tt>:all</tt> (default), <tt>:email_addresses</tt>, and <tt>:urls</tt>.
</p>
<pre>
  auto_link(&quot;Go to http://www.rubyonrails.org and say hello to david@loudthinking.com&quot;) =&gt;
    Go to &lt;a href=&quot;http://www.rubyonrails.org&quot;&gt;http://www.rubyonrails.org&lt;/a&gt; and
    say hello to &lt;a href=&quot;mailto:david@loudthinking.com&quot;&gt;david@loudthinking.com&lt;/a&gt;
</pre>
<p>
If a block is given, each url and email address is yielded and the result
is used as the link text.
</p>
<pre>
  auto_link(post.body, :all, :target =&gt; '_blank') do |text|
    truncate(text, 15)
  end
</pre>
        </div>
      </div>

      <div id="method-M001175" class="method-detail">
        <a name="M001175"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001175.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001175.html');return false;">
          <span class="method-name">concat</span><span class="method-args">(string, binding)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The preferred method of outputting text in your views is to use the &lt;%=
&quot;text&quot; %&gt; eRuby syntax. The regular <em>puts</em> and
<em>print</em> methods do not operate as expected in an eRuby code block.
If you absolutely must output text within a code block, you can use the <a
href="TextHelper.html#M001175">concat</a> method.
</p>
<pre>
  &lt;% concat &quot;hello&quot;, binding %&gt;
</pre>
<p>
is equivalent to using:
</p>
<pre>
  &lt;%= &quot;hello&quot; %&gt;
</pre>
        </div>
      </div>

      <div id="method-M001189" class="method-detail">
        <a name="M001189"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001189.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001189.html');return false;">
          <span class="method-name">cycle</span><span class="method-args">(first_value, *values)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a Cycle object whose <em>to_s</em> method cycles through elements
of an array every time it is called. This can be used for example, to
alternate classes for table rows:
</p>
<pre>
  &lt;% @items.each do |item| %&gt;
    &lt;tr class=&quot;&lt;%= cycle(&quot;even&quot;, &quot;odd&quot;) -%&gt;&quot;&gt;
      &lt;td&gt;item&lt;/td&gt;
    &lt;/tr&gt;
  &lt;% end %&gt;
</pre>
<p>
You can use named cycles to allow nesting in loops. Passing a Hash as the
last parameter with a <tt>:name</tt> key will create a named <a
href="TextHelper.html#M001189">cycle</a>. You can manually reset a <a
href="TextHelper.html#M001189">cycle</a> by calling <a
href="TextHelper.html#M001190">reset_cycle</a> and passing the name of the
<a href="TextHelper.html#M001189">cycle</a>.
</p>
<pre>
  &lt;% @items.each do |item| %&gt;
    &lt;tr class=&quot;&lt;%= cycle(&quot;even&quot;, &quot;odd&quot;, :name =&gt; &quot;row_class&quot;)
      &lt;td&gt;
        &lt;% item.values.each do |value| %&gt;
          &lt;span style=&quot;color:&lt;%= cycle(&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, :name =&gt; &quot;colors&quot;) -%&gt;&quot;&gt;
            value
          &lt;/span&gt;
        &lt;% end %&gt;
        &lt;% reset_cycle(&quot;colors&quot;) %&gt;
      &lt;/td&gt;
   &lt;/tr&gt;
 &lt;% end %&gt;
</pre>
        </div>
      </div>

      <div id="method-M001178" class="method-detail">
        <a name="M001178"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001178.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001178.html');return false;">
          <span class="method-name">excerpt</span><span class="method-args">(text, phrase, radius = 100, excerpt_string = &quot;...&quot;)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Extracts an <a href="TextHelper.html#M001178">excerpt</a> from
<tt>text</tt> that matches the first instance of <tt>phrase</tt>. The
<tt>radius</tt> expands the <a href="TextHelper.html#M001178">excerpt</a>
on each side of <tt>phrase</tt> by the number of characters defined in
<tt>radius</tt>. If the <a href="TextHelper.html#M001178">excerpt</a>
radius overflows the beginning or end of the <tt>text</tt>, then the
<tt>excerpt_string</tt> will be prepended/appended accordingly. If the
<tt>phrase</tt> isn&#8216;t found, nil is returned.
</p>
<pre>
  excerpt('This is an example', 'an', 5)
   =&gt; &quot;...s is an examp...&quot;

  excerpt('This is an example', 'is', 5)
   =&gt; &quot;This is an...&quot;
</pre>
        </div>
      </div>

      <div id="method-M001177" class="method-detail">
        <a name="M001177"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001177.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001177.html');return false;">
          <span class="method-name">highlight</span><span class="method-args">(text, phrase, highlighter = '&lt;strong class=&quot;highlight&quot;&gt;\1&lt;/strong&gt;')</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Highlights <tt>phrase</tt> everywhere it is found in <tt>text</tt> by
inserting it into a <tt>highlighter</tt> string. The highlighter can be
specialized by passing <tt>highlighter</tt> as a single-quoted string with
\1 where the phrase is to be inserted.
</p>
<pre>
  highlight('You searched for: rails', 'rails')
   =&gt; You searched for: &lt;strong class=&quot;highlight&quot;&gt;rails&lt;/strong&gt;
</pre>
        </div>
      </div>

      <div id="method-M001183" class="method-detail">
        <a name="M001183"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001183.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001183.html');return false;">
          <span class="method-name">markdown</span><span class="method-args">(text)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the text with all the Markdown codes turned into HTML tags.
<em>This method is only available if <a
href="http://www.deveiate.org/projects/BlueCloth">BlueCloth</a> is
available</em>.
</p>
        </div>
      </div>

      <div id="method-M001179" class="method-detail">
        <a name="M001179"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001179.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001179.html');return false;">
          <span class="method-name">pluralize</span><span class="method-args">(count, singular, plural = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Attempts to <a href="TextHelper.html#M001179">pluralize</a> the
<tt>singular</tt> word unless <tt>count</tt> is 1. If <tt>plural</tt> is
supplied, it will use that when count is &gt; 1, if the ActiveSupport
Inflector is loaded, it will use the Inflector to determine the plural
form, otherwise it will just add an &#8216;s&#8217; to the
<tt>singular</tt> word.
</p>
<pre>
  pluralize(1, 'person')  =&gt; 1 person
  pluralize(2, 'person')  =&gt; 2 people
  pluralize(3, 'person', 'users')  =&gt; 3 users
</pre>
        </div>
      </div>

      <div id="method-M001190" class="method-detail">
        <a name="M001190"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001190.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001190.html');return false;">
          <span class="method-name">reset_cycle</span><span class="method-args">(name = &quot;default&quot;)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Resets a <a href="TextHelper.html#M001189">cycle</a> so that it starts from
the first element the next time it is called. Pass in <tt>name</tt> to
reset a named <a href="TextHelper.html#M001189">cycle</a>.
</p>
        </div>
      </div>

      <div id="method-M001187" class="method-detail">
        <a name="M001187"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001187.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001187.html');return false;">
          <span class="method-name">sanitize</span><span class="method-args">(html)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sanitizes the <tt>html</tt> by converting &lt;form&gt; and &lt;script&gt;
tags into regular text, and removing all &quot;onxxx&quot; attributes (so
that arbitrary Javascript cannot be executed). It also removes href= and
src= attributes that start with &quot;javascript:&quot;. You can modify
what gets sanitized by defining VERBOTEN_TAGS and VERBOTEN_ATTRS before
this Module is loaded.
</p>
<pre>
  sanitize('&lt;script&gt; do_nasty_stuff() &lt;/script&gt;')
   =&gt; &amp;lt;script&gt; do_nasty_stuff() &amp;lt;/script&gt;
  sanitize('&lt;a href=&quot;javascript: sucker();&quot;&gt;Click here for $100&lt;/a&gt;')
   =&gt; &lt;a&gt;Click here for $100&lt;/a&gt;
</pre>
        </div>
      </div>

      <div id="method-M001184" class="method-detail">
        <a name="M001184"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001184.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001184.html');return false;">
          <span class="method-name">simple_format</span><span class="method-args">(text)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>text</tt> transformed into HTML using simple formatting rules.
Two or more consecutive newlines(<tt>\n\n</tt>) are considered as a
paragraph and wrapped in <tt>&lt;p&gt;</tt> tags. One newline (<tt>\n</tt>)
is considered as a linebreak and a <tt>&lt;br /&gt;</tt> tag is appended.
This method does not remove the newlines from the <tt>text</tt>.
</p>
        </div>
      </div>

      <div id="method-M001186" class="method-detail">
        <a name="M001186"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001186.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001186.html');return false;">
          <span class="method-name">strip_links</span><span class="method-args">(text)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Strips link tags from <tt>text</tt> leaving just the link label.
</p>
<pre>
  strip_links('&lt;a href=&quot;http://www.rubyonrails.org&quot;&gt;Ruby on Rails&lt;/a&gt;')
   =&gt; Ruby on Rails
</pre>
        </div>
      </div>

      <div id="method-M001188" class="method-detail">
        <a name="M001188"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001188.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001188.html');return false;">
          <span class="method-name">strip_tags</span><span class="method-args">(html)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Strips all HTML tags from the <tt>html</tt>, including comments. This uses
the html-scanner tokenizer and so its HTML parsing ability is limited by
that of html-scanner.
</p>
        </div>
      </div>

      <div id="method-M001181" class="method-detail">
        <a name="M001181"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001181.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001181.html');return false;">
          <span class="method-name">textilize</span><span class="method-args">(text)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the text with all the Textile codes turned into HTML tags. <em>This
method is only available if <a
href="http://whytheluckystiff.net/ruby/redcloth/">RedCloth</a> is
available</em>.
</p>
        </div>
      </div>

      <div id="method-M001182" class="method-detail">
        <a name="M001182"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001182.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001182.html');return false;">
          <span class="method-name">textilize_without_paragraph</span><span class="method-args">(text)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the text with all the Textile codes turned into HTML tags, but
without the bounding &lt;p&gt; tag that RedCloth adds. <em>This method is
only available if <a
href="http://whytheluckystiff.net/ruby/redcloth/">RedCloth</a> is
available</em>.
</p>
        </div>
      </div>

      <div id="method-M001176" class="method-detail">
        <a name="M001176"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001176.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001176.html');return false;">
          <span class="method-name">truncate</span><span class="method-args">(text, length = 30, truncate_string = &quot;...&quot;)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
If <tt>text</tt> is longer than <tt>length</tt>, <tt>text</tt> will be
truncated to the length of <tt>length</tt> and the last three characters
will be replaced with the <tt>truncate_string</tt>.
</p>
<pre>
  truncate(&quot;Once upon a time in a world far far away&quot;, 14)
   =&gt; Once upon a...
</pre>
        </div>
      </div>

      <div id="method-M001180" class="method-detail">
        <a name="M001180"></a>

        <div class="method-heading">
          <a href="TextHelper.src/M001180.html" target="Code" class="method-signature"
            onclick="popupCode('TextHelper.src/M001180.html');return false;">
          <span class="method-name">word_wrap</span><span class="method-args">(text, line_width = 80)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Wraps the <tt>text</tt> into lines no longer than <tt>line_width</tt>
width. This method breaks on the first whitespace character that does not
exceed <tt>line_width</tt>.
</p>
<pre>
  word_wrap('Once upon a time', 4)
   =&gt; Once\nupon\na\ntime
</pre>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>