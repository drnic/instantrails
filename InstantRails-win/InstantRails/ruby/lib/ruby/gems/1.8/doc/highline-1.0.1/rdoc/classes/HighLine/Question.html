<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: HighLine::Question</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">HighLine::Question</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/highline/question_rb.html">
                lib/highline/question.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
<a href="Question.html">Question</a> objects contain all the details of a
single invocation of <a href="../HighLine.html#M000003">HighLine.ask</a>().
The object is initialized by the parameters passed to <a
href="../HighLine.html#M000003">HighLine.ask</a>() and then queried to make
sure each step of the input process is handled according to the users
wishes.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000009">answer_or_default</a>&nbsp;&nbsp;
      <a href="#M000010">build_responses</a>&nbsp;&nbsp;
      <a href="#M000011">change_case</a>&nbsp;&nbsp;
      <a href="#M000012">convert</a>&nbsp;&nbsp;
      <a href="#M000013">expected_range</a>&nbsp;&nbsp;
      <a href="#M000014">in_range?</a>&nbsp;&nbsp;
      <a href="#M000008">new</a>&nbsp;&nbsp;
      <a href="#M000015">remove_whitespace</a>&nbsp;&nbsp;
      <a href="#M000016">selection</a>&nbsp;&nbsp;
      <a href="#M000017">to_str</a>&nbsp;&nbsp;
      <a href="#M000018">valid_answer?</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Class <a href="Question/NoAutoCompleteMatch.html" class="link">HighLine::Question::NoAutoCompleteMatch</a><br />

    </div>




    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">above</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Used to control range checks for answer.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">answer_type</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The type that will be used to convert this answer.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">below</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Used to control range checks for answer.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">case</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Used to control whitespace processing for the answer to this question. See
<a href="Question.html#M000011">HighLine::Question.change_case</a>() for
acceptable settings.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">character</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Can be set to <tt>true</tt> to use <a
href="../HighLine.html">HighLine</a>&#8217;s cross-platform character
reader instead of fetching an entire line of input. (Note: <a
href="../HighLine.html">HighLine</a>&#8217;s character reader <b>ONLY</b>
supports STDIN on Windows and Unix.) Can also be set to <tt>:getc</tt> to
use that method on the input stream.

<p>
<b>WARNING</b>: The <em>echo</em> attribute for a question is ignored when
using thw <tt>:getc</tt> method.
</p>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">confirm</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Asks a yes or no confirmation question, to ensure a user knows what they
have just agreed to. If set to <tt>true</tt> the question will be,
&quot;Are you sure? &quot; Any other true value for this attribute is
assumed to be the question to ask. When <tt>false</tt> or <tt>nil</tt> (the
default), answers are not confirmed.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">default</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Used to provide a default answer to this question.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">directory</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The directory from which a user will be allowed to select files, when File
or Pathname is specified as an <em>answer_type</em>. Initially set to
<tt>Pathname.new(File.expand_path(File.dirname($0)))</tt>.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">echo</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Can be set to <tt>true</tt> or <tt>false</tt> to control whether or not
input will be echoed back to the user. A setting of <tt>true</tt> will
cause echo to match input, but any other true value will be treated as to
String to echo for each character typed.

<p>
This requires <a href="../HighLine.html">HighLine</a>&#8217;s character
reader. See the <em>character</em> attribute for details.
</p>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">gather</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
When set, the user will be prompted for multiple answers which will be
collected into an Array or Hash and returned as the final answer.

<p>
You can set <em>gather</em> to an Integer to have an Array of exactly that
many answers collected, or a String/Regexp to match an end input which will
not be returned in the Array.
</p>
<p>
Optionally <em>gather</em> can be set to a Hash. In this case, the question
will be asked once for each key and the answers will be returned in a Hash,
mapped by key. The <tt>@key</tt> variable is set before each question is
evaluated, so you can use it in your question.
</p>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">glob</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The glob pattern used to limit file selection when File or Pathname is
specified as an <em>answer_type</em>. Initially set to
<tt>&quot;*&quot;</tt>.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">in</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
If set, answer must pass an include?() check on this object.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">limit</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Allows you to set a character limit for input.

<p>
<b>WARNING</b>: This option forces a character by character read.
</p>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">question</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The ERb template of the question to be asked.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">readline</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Use the Readline library to fetch input. This allows input editing as well
as keeping a history. In addition, tab will auto-complete within an Array
of choices or a file listing.

<p>
<b>WARNING</b>: This option is incompatible with all of <a
href="../HighLine.html">HighLine</a>&#8217;s character reading modes and it
causes <a href="../HighLine.html">HighLine</a> to ignore the specified
<em>input</em> stream.
</p>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">responses</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
A Hash that stores the various responses used by <a
href="../HighLine.html">HighLine</a> to notify the user. The currently used
responses and their purpose are as follows:

<table>
<tr><td valign="top"><tt>:ambiguous_completion</tt>:</td><td>Used to notify the user of an ambiguous answer the auto-completion system
cannot resolve.

</td></tr>
<tr><td valign="top"><tt>:ask_on_error</tt>:</td><td>This is the question that will be redisplayed to the user in the event of
an error. Can be set to <tt>:question</tt> to repeat the original question.

</td></tr>
<tr><td valign="top"><tt>:invalid_type</tt>:</td><td>The error message shown when a type conversion fails.

</td></tr>
<tr><td valign="top"><tt>:no_completion</tt>:</td><td>Used to notify the user that their selection does not have a valid
auto-completion match.

</td></tr>
<tr><td valign="top"><tt>:not_in_range</tt>:</td><td>Used to notify the user that a provided answer did not satisfy the range
requirement tests.

</td></tr>
<tr><td valign="top"><tt>:not_valid</tt>:</td><td>The error message shown when validation checks fail.

</td></tr>
</table>
</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">validate</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
If set to a Regexp, the answer must match (before type conversion). Can
also be set to a Proc which will be called with the provided answer to
validate with a <tt>true</tt> or <tt>false</tt> return.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">whitespace</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Used to control whitespace processing for the answer to this question. See
<a href="Question.html#M000015">HighLine::Question.remove_whitespace</a>()
for acceptable settings.

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000008" class="method-detail">
        <a name="M000008"></a>

        <div class="method-heading">
          <a href="Question.src/M000008.html" target="Code" class="method-signature"
            onclick="popupCode('Question.src/M000008.html');return false;">
          <span class="method-name">new</span><span class="method-args">( question, answer_type ) {|self if block_given?| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Create an instance of <a href="Question.html">HighLine::Question</a>.
Expects a <em>question</em> to ask (can be <tt>&quot;&quot;</tt>) and an
<em>answer_type</em> to convert the answer to. The <em>answer_type</em>
parameter must be a type recongnized by <a
href="Question.html#M000012">Question.convert</a>(). If given, a block is
yeilded the new <a href="Question.html">Question</a> object to allow custom
initializaion.
</p>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000009" class="method-detail">
        <a name="M000009"></a>

        <div class="method-heading">
          <a href="Question.src/M000009.html" target="Code" class="method-signature"
            onclick="popupCode('Question.src/M000009.html');return false;">
          <span class="method-name">answer_or_default</span><span class="method-args">( answer_string )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the provided <em>answer_string</em> or the default answer for this
<a href="Question.html">Question</a> if a default was set and the answer is
empty.
</p>
        </div>
      </div>

      <div id="method-M000010" class="method-detail">
        <a name="M000010"></a>

        <div class="method-heading">
          <a href="Question.src/M000010.html" target="Code" class="method-signature"
            onclick="popupCode('Question.src/M000010.html');return false;">
          <span class="method-name">build_responses</span><span class="method-args">( )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Called late in the initialization process to build intelligent responses
based on the details of this <a href="Question.html">Question</a> object.
</p>
        </div>
      </div>

      <div id="method-M000011" class="method-detail">
        <a name="M000011"></a>

        <div class="method-heading">
          <a href="Question.src/M000011.html" target="Code" class="method-signature"
            onclick="popupCode('Question.src/M000011.html');return false;">
          <span class="method-name">change_case</span><span class="method-args">( answer_string )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the provided <em>answer_string</em> after changing character case
by the rules of this <a href="Question.html">Question</a>. Valid settings
for whitespace are:
</p>
<table>
<tr><td valign="top"><tt>nil</tt>:</td><td>Do not alter character case. (Default.)

</td></tr>
<tr><td valign="top"><tt>:up</tt>:</td><td>Calls upcase().

</td></tr>
<tr><td valign="top"><tt>:upcase</tt>:</td><td>Calls upcase().

</td></tr>
<tr><td valign="top"><tt>:down</tt>:</td><td>Calls downcase().

</td></tr>
<tr><td valign="top"><tt>:downcase</tt>:</td><td>Calls downcase().

</td></tr>
<tr><td valign="top"><tt>:capitalize</tt>:</td><td>Calls capitalize().

</td></tr>
</table>
<p>
An unrecognized choice (like <tt>:none</tt>) is treated as <tt>nil</tt>.
</p>
        </div>
      </div>

      <div id="method-M000012" class="method-detail">
        <a name="M000012"></a>

        <div class="method-heading">
          <a href="Question.src/M000012.html" target="Code" class="method-signature"
            onclick="popupCode('Question.src/M000012.html');return false;">
          <span class="method-name">convert</span><span class="method-args">( answer_string )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Transforms the given <em>answer_string</em> into the expected type for this
<a href="Question.html">Question</a>. Currently supported conversions are:
</p>
<table>
<tr><td valign="top"><tt>[&#8230;]</tt>:</td><td>Answer must be a member of the passed Array. Auto-completion is used to
expand partial answers.

</td></tr>
<tr><td valign="top"><tt>lambda {&#8230;}</tt>:</td><td>Answer is passed to lambda for conversion.

</td></tr>
<tr><td valign="top">Date:</td><td>Date.parse() is called with answer.

</td></tr>
<tr><td valign="top">DateTime:</td><td>DateTime.parse() is called with answer.

</td></tr>
<tr><td valign="top">File:</td><td>The entered file name is auto-completed in terms of <em>directory</em> +
<em>glob</em>, opened, and returned.

</td></tr>
<tr><td valign="top">Float:</td><td>Answer is converted with Kernel.Float().

</td></tr>
<tr><td valign="top">Integer:</td><td>Answer is converted with Kernel.Integer().

</td></tr>
<tr><td valign="top"><tt>nil</tt>:</td><td>Answer is left in String format. (Default.)

</td></tr>
<tr><td valign="top">Pathname:</td><td>Same as File, save that a Pathname object is returned.

</td></tr>
<tr><td valign="top">String:</td><td>Answer is converted with Kernel.String().

</td></tr>
<tr><td valign="top">Regexp:</td><td>Answer is fed to Regexp.new().

</td></tr>
<tr><td valign="top">Symbol:</td><td>The method to_sym() is called on answer and the result returned.

</td></tr>
<tr><td valign="top"><em>any other Class</em>:</td><td>The answer is passed on to <tt>Class.parse()</tt>.

</td></tr>
</table>
<p>
This method throws ArgumentError, if the conversion cannot be completed for
any reason.
</p>
        </div>
      </div>

      <div id="method-M000013" class="method-detail">
        <a name="M000013"></a>

        <div class="method-heading">
          <a href="Question.src/M000013.html" target="Code" class="method-signature"
            onclick="popupCode('Question.src/M000013.html');return false;">
          <span class="method-name">expected_range</span><span class="method-args">( )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a english explination of the current range settings.
</p>
        </div>
      </div>

      <div id="method-M000014" class="method-detail">
        <a name="M000014"></a>

        <div class="method-heading">
          <a href="Question.src/M000014.html" target="Code" class="method-signature"
            onclick="popupCode('Question.src/M000014.html');return false;">
          <span class="method-name">in_range?</span><span class="method-args">( answer_object )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>true</tt> if the <em>answer_object</em> is greater than the
<em>above</em> attribute, less than the <em>below</em> attribute and
included?()ed in the <em>in</em> attribute. Otherwise, <tt>false</tt> is
returned. Any <tt>nil</tt> attributes are not checked.
</p>
        </div>
      </div>

      <div id="method-M000015" class="method-detail">
        <a name="M000015"></a>

        <div class="method-heading">
          <a href="Question.src/M000015.html" target="Code" class="method-signature"
            onclick="popupCode('Question.src/M000015.html');return false;">
          <span class="method-name">remove_whitespace</span><span class="method-args">( answer_string )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the provided <em>answer_string</em> after processing whitespace by
the rules of this <a href="Question.html">Question</a>. Valid settings for
whitespace are:
</p>
<table>
<tr><td valign="top"><tt>nil</tt>:</td><td>Do not alter whitespace.

</td></tr>
<tr><td valign="top"><tt>:strip</tt>:</td><td>Calls strip(). (Default.)

</td></tr>
<tr><td valign="top"><tt>:chomp</tt>:</td><td>Calls chomp().

</td></tr>
<tr><td valign="top"><tt>:collapse</tt>:</td><td>Collapses all whitspace runs to a single space.

</td></tr>
<tr><td valign="top"><tt>:strip_and_collapse</tt>:</td><td>Calls strip(), then collapses all whitspace runs to a single space.

</td></tr>
<tr><td valign="top"><tt>:chomp_and_collapse</tt>:</td><td>Calls chomp(), then collapses all whitspace runs to a single space.

</td></tr>
<tr><td valign="top"><tt>:remove</tt>:</td><td>Removes all whitespace.

</td></tr>
</table>
<p>
An unrecognized choice (like <tt>:none</tt>) is treated as <tt>nil</tt>.
</p>
<p>
This process is skipped, for single character input.
</p>
        </div>
      </div>

      <div id="method-M000016" class="method-detail">
        <a name="M000016"></a>

        <div class="method-heading">
          <a href="Question.src/M000016.html" target="Code" class="method-signature"
            onclick="popupCode('Question.src/M000016.html');return false;">
          <span class="method-name">selection</span><span class="method-args">( )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an Array of valid answers to this question. These answers are only
known when <em>answer_type</em> is set to an Array of choices, File, or
Pathname. Any other time, this method will return an empty Array.
</p>
        </div>
      </div>

      <div id="method-M000017" class="method-detail">
        <a name="M000017"></a>

        <div class="method-heading">
          <a href="Question.src/M000017.html" target="Code" class="method-signature"
            onclick="popupCode('Question.src/M000017.html');return false;">
          <span class="method-name">to_str</span><span class="method-args">( )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Stringifies the question to be asked.
</p>
        </div>
      </div>

      <div id="method-M000018" class="method-detail">
        <a name="M000018"></a>

        <div class="method-heading">
          <a href="Question.src/M000018.html" target="Code" class="method-signature"
            onclick="popupCode('Question.src/M000018.html');return false;">
          <span class="method-name">valid_answer?</span><span class="method-args">( answer_string )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>true</tt> if the provided <em>answer_string</em> is accepted by
the <em>validate</em> attribute or <tt>false</tt> if it&#8217;s not.
</p>
<p>
It&#8217;s important to realize that an answer is validated after
whitespace and case handling.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>